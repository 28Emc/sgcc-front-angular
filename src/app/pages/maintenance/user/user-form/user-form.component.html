<form (ngSubmit)="$event.preventDefault()" [formGroup]="form" autocomplete="off">
  <div class="flex items-center" mat-dialog-title>
    <h2 class="headline m-0 flex-auto">
      {{ titulo }}
    </h2>

    <button class="text-secondary" mat-dialog-close mat-icon-button type="button">
      <mat-icon svgIcon="mat:close"></mat-icon>
    </button>
  </div>

  <mat-divider class="text-border"></mat-divider>

  <mat-dialog-content class="flex flex-col">
    <div class="grid md:grid-cols-2 grid-cols-1 md:gap-x-3 gap-x-0">
      <mat-form-field class="sm:col-span-1 col-span-full">
        <mat-label>Rol</mat-label>
        <input autocomplete="new-password" aria-autocomplete="none" class="!uppercase" formControlName="role"
          matInput />
        <!-- <mat-icon matIconPrefix svgIcon="mat:business"></mat-icon> -->
      </mat-form-field>

      <mat-form-field class="sm:col-span-1 col-span-full">
        <mat-label>Alias (opcional)</mat-label>
        <input cdkFocusInitial autocomplete="new-password" aria-autocomplete="none" formControlName="alias" matInput
          placeholder="Escribe un alias" />
        <!-- <mat-icon matIconPrefix svgIcon="mat:business"></mat-icon> -->
      </mat-form-field>

      <mat-form-field class="sm:col-span-1 col-span-full">
        <mat-label>Usuario</mat-label>
        <input autocomplete="new-password" aria-autocomplete="none" formControlName="username" matInput type="text"
          placeholder="Escribe un nombre de usuario" />
        <!-- <mat-icon matIconPrefix svgIcon="mat:business"></mat-icon> -->
      </mat-form-field>

      @if (data.user?.id) {
      <mat-form-field class="sm:col-span-1 col-span-full">
        <mat-label>Fecha Registro</mat-label>
        <input autocomplete="new-password" aria-autocomplete="none" [matDatepicker]="datepickerFC" matInput
          placeholder="dd/MM/yyyy" formControlName="createdAt" />
        <mat-datepicker-toggle [for]="datepickerFC" matIconSuffix></mat-datepicker-toggle>
        <mat-datepicker #datepickerFC></mat-datepicker>
      </mat-form-field>
      <!-- <mat-form-field class="sm:col-span-1 col-span-full">
          <mat-label>Estado</mat-label>
          <input autocomplete="new-password" aria-autocomplete="none" class="uppercase" formControlName="status" matInput />
        </mat-form-field> -->
      } @else {
      <mat-form-field class="sm:col-span-1 col-span-full">
        <mat-label>Contrase単a</mat-label>
        <input autocomplete="new-password" aria-autocomplete="none" [type]="inputType" formControlName="password"
          placeholder="Escribe una contrase単a" matInput required />
        <button (click)="toggleVisibility()" mat-icon-button matIconSuffix [disabled]="loading"
          [matTooltip]="visible ? 'Ocultar contrase単a' : 'Ver contrase単a'" type="button" aria-hidden="false">
          <mat-icon class="hover:text-primary-600 transition"
            [svgIcon]="!visible ? 'mat:visibility' : 'mat:visibility_off'"></mat-icon>
        </button>
        <!-- <mat-icon matIconPrefix svgIcon="mat:business"></mat-icon> -->
      </mat-form-field>
      }
    </div>

  </mat-dialog-content>

  <mat-dialog-actions>
    <div class="flex sm:flex-row flex-col sm:items-center justify-between gap-2 w-full px-3">
      <vex-cancel-button mat-dialog-close btnText="Cancelar" btnClasses="w-full sm:w-auto"></vex-cancel-button>
      <vex-action-button (actionBtnClicked)="saveData()" [btnText]="isCreateMode() ? 'Registrar' : 'Guardar cambios'"
        [btnDisabled]="loading || form.invalid" [btnLoading]="loading" btnColor="primary"
        btnClasses="w-full sm:w-auto"></vex-action-button>
    </div>
  </mat-dialog-actions>
</form>
